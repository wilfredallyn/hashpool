[sv2_messaging]
# SV2 messaging configuration for pool-mint communication
enabled = true
# TCP listener for mint connections (separate from mining device listener)
mint_listen_address = "127.0.0.1:34260"
broadcast_buffer_size = 1000
mpsc_buffer_size = 100
max_retries = 3
timeout_ms = 5000
# Pool's Noise protocol public key (for mint to connect to pool)
pool_authority_public_key = "9auqWEzQDVyd2oe1JVGFLMLHZtCo2FFqZwtKA5gd9xbuEu7PH72"

[locking]
# Miner's compressed public key for quote attribution (33 bytes in hex)
# This is derived from the translator's locking private key
locking_pubkey = "03387b8527d7528f2e2f76899f41a0c6a87c87be83d3ff57c2dbec1a176b805c70"

[mint]
host = "localhost"
port = 3338
url = "http://localhost:3338"
# host = "mint.hashpool.dev"
# port = 443
# url = "https://mint.hashpool.dev"

[pool]
port = 34254
# Optional minimum hashrate (in H/s) to prevent resource exhaustion from weak devices
# If set, channels claiming less than this hashrate will be clamped to this value
# Example: 100000000 = 100 MH/s
# Default: None (no constraint, accept any device)
# min_downstream_hashrate = 100000000

[proxy]
port = 34255

[bitcoin]
# network set by var in devenv.nix
portRegtest = "18443"
portTestnet = "48332"

[validation]
# Absolute share difficulty filter: minimum leading zero bits required
# 0 = no check, 32 = typical production value
minimum_share_difficulty_bits = 32

[ehash]
# TODO: This should be retrieved dynamically from the mint
# Minimum difficulty (leading zero bits) required to earn 1 unit of ehash
minimum_difficulty = 32

[stats]
# Interval for pool to generate and push snapshots to stats-pool (seconds)
# Tuning notes:
# - Development: 5s for normal monitoring
# - High-frequency monitoring: 1s for detailed metrics
# - Battery-limited: 10s to reduce overhead
snapshot_poll_interval_secs = 5

[web_pool]
# Interval in seconds for web-pool to pull from stats-pool (seconds)
stats_poll_interval_secs = 3
# Interval in seconds for browser to poll web-pool API (seconds)
client_poll_interval_secs = 3
